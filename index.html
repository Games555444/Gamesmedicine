<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Juego de MÃ©dicos</title>
<style>
  body {
    margin: 0;
    background: linear-gradient(180deg, #e3f2fd, #bbdefb);
    font-family: 'Segoe UI', sans-serif;
    overflow: hidden;
  }
  h1, h2, h3, button { text-align: center; }
  #gameContainer {
    width: 100%;
    height: 90vh;
    position: relative;
    overflow: hidden;
  }
  .objeto {
    position: absolute;
    font-size: 2rem;
    animation: caer 6s linear forwards;
    cursor: pointer;
  }
  @keyframes caer {
    from { top: -50px; }
    to { top: 100vh; opacity: 0; }
  }
  #hud {
    display: flex;
    justify-content: space-around;
    padding: 10px;
    background: #2196f3;
    color: white;
    font-weight: bold;
  }
  #preguntaBox {
    text-align: center;
    margin-top: 10px;
  }
  #preguntaBox input {
    padding: 5px;
    font-size: 1rem;
  }
  #niveles {
    display: flex;
    justify-content: space-around;
    background: #1976d2;
    color: white;
    padding: 10px;
  }
  .nivel {
    cursor: pointer;
    padding: 5px 10px;
    border-radius: 10px;
    background: #42a5f5;
  }
  .nivel.activo {
    background: #0d47a1;
    font-weight: bold;
  }
  #mensajeFinal {
    text-align: center;
    font-size: 1.3rem;
    color: #0d47a1;
    margin-top: 15px;
  }
</style>
</head>
<body>
<h1>ğŸ©º Juego de MÃ©dicos</h1>

<div id="niveles">
  <div class="nivel activo" data-nivel="AnatomÃ­a">AnatomÃ­a</div>
  <div class="nivel" data-nivel="CardiologÃ­a">CardiologÃ­a</div>
  <div class="nivel" data-nivel="NeurologÃ­a">NeurologÃ­a</div>
  <div class="nivel" data-nivel="Urgencias">Urgencias</div>
  <div class="nivel" data-nivel="PediatrÃ­a">PediatrÃ­a</div>
</div>

<div id="hud">
  <div>â¤ï¸ Vidas: <span id="vidas">3</span></div>
  <div>â±ï¸ Tiempo: <span id="tiempo">60</span>s</div>
  <div>ğŸ’¡ Pistas: <span id="pistas">1</span></div>
  <div>â­ Puntos: <span id="puntos">0</span></div>
</div>

<div id="gameContainer"></div>

<div id="preguntaBox">
  <h3 id="pregunta"></h3>
  <input type="text" id="respuesta" placeholder="Tu respuesta...">
  <button onclick="verificarRespuesta()">Responder</button>
</div>

<h2 id="mensajeFinal"></h2>

<script>
let vidas = 3;
let tiempo = 60;
let puntos = 0;
let pistas = 1;
let nivelActual = "AnatomÃ­a";
let intervaloTiempo;
let jugando = false;
let preguntaActual = null;

const objetos = ["ğŸ’‰", "â±ï¸", "ğŸ’¡"];

const preguntasPorNivel = {
  "AnatomÃ­a": [
    { pregunta: "Â¿CuÃ¡l es el Ã³rgano encargado de bombear la sangre?", respuesta: "corazÃ³n" },
    { pregunta: "Â¿DÃ³nde se encuentra el fÃ©mur?", respuesta: "pierna" }
  ],
  "CardiologÃ­a": [
    { pregunta: "Â¿QuÃ© vasos llevan la sangre desde el corazÃ³n?", respuesta: "arterias" },
    { pregunta: "Â¿QuÃ© vÃ¡lvula separa la aurÃ­cula izquierda del ventrÃ­culo izquierdo?", respuesta: "mitral" }
  ],
  "NeurologÃ­a": [
    { pregunta: "Â¿CuÃ¡l es la cÃ©lula principal del sistema nervioso?", respuesta: "neurona" },
    { pregunta: "Â¿QuÃ© parte del cerebro controla el equilibrio?", respuesta: "cerebelo" }
  ],
  "Urgencias": [
    { pregunta: "Â¿QuÃ© hacer ante una fractura evidente?", respuesta: "inmovilizar" },
    { pregunta: "Â¿QuÃ© nÃºmero se debe llamar ante una emergencia?", respuesta: "911" }
  ],
  "PediatrÃ­a": [
    { pregunta: "Â¿A quÃ© edad suelen salir los primeros dientes de leche?", respuesta: "6 meses" },
    { pregunta: "Â¿QuÃ© vacuna se aplica al nacer?", respuesta: "bcg" }
  ]
};

// Iniciar el juego
function iniciarJuego() {
  jugando = true;
  tiempo = 60;
  vidas = 3;
  puntos = 0;
  pistas = 1;
  actualizarHUD();
  mostrarPregunta();
  intervaloTiempo = setInterval(actualizarTiempo, 1000);
  generarObjetos();
}
iniciarJuego();

function actualizarHUD() {
  document.getElementById("vidas").textContent = vidas;
  document.getElementById("tiempo").textContent = tiempo;
  document.getElementById("pistas").textContent = pistas;
  document.getElementById("puntos").textContent = puntos;
}

// Actualizar tiempo
function actualizarTiempo() {
  if (!jugando) return;
  tiempo--;
  actualizarHUD();
  if (tiempo <= 0) gameOver();
}

// Generar objetos que caen
function generarObjetos() {
  const contenedor = document.getElementById("gameContainer");
  setInterval(() => {
    if (!jugando) return;
    const obj = document.createElement("div");
    obj.classList.add("objeto");
    const tipo = objetos[Math.floor(Math.random() * objetos.length)];
    obj.textContent = tipo;
    obj.style.left = Math.random() * 90 + "%";
    obj.onclick = () => { recogerObjeto(tipo); obj.remove(); };
    contenedor.appendChild(obj);
    setTimeout(() => obj.remove(), 6000);
  }, 1500);
}

// Efectos de los objetos
function recogerObjeto(tipo) {
  if (tipo === "ğŸ’‰") { vidas++; }
  else if (tipo === "â±ï¸") { tiempo += 5; }
  else if (tipo === "ğŸ’¡") { pistas++; mostrarPista(); }
  actualizarHUD();
}

// Mostrar pregunta
function mostrarPregunta() {
  const lista = preguntasPorNivel[nivelActual];
  preguntaActual = lista[Math.floor(Math.random() * lista.length)];
  document.getElementById("pregunta").textContent = preguntaActual.pregunta;
  document.getElementById("respuesta").value = "";
}

// Verificar respuesta
function verificarRespuesta() {
  const resp = document.getElementById("respuesta").value.trim().toLowerCase();
  if (resp === "") return;
  if (resp === preguntaActual.respuesta.toLowerCase()) {
    puntos += 10;
    mostrarMensaje("âœ… Â¡Correcto!");
    if (puntos % 20 === 0) siguienteNivel();
  } else {
    vidas--;
    mostrarMensaje("âŒ Incorrecto, la respuesta era: " + preguntaActual.respuesta);
    if (vidas <= 0) gameOver();
  }
  actualizarHUD();
  mostrarPregunta();
}

function mostrarPista() {
  if (pistas <= 0) return;
  pistas--;
  const pista = preguntaActual.respuesta[0].toUpperCase() + "..." ;
  mostrarMensaje("ğŸ’¡ Pista: empieza con " + pista);
  actualizarHUD();
}

// Cambiar nivel
function siguienteNivel() {
  const niveles = ["AnatomÃ­a", "CardiologÃ­a", "NeurologÃ­a", "Urgencias", "PediatrÃ­a"];
  const index = niveles.indexOf(nivelActual);
  if (index < niveles.length - 1) {
    nivelActual = niveles[index + 1];
    document.querySelectorAll(".nivel").forEach(n => n.classList.remove("activo"));
    document.querySelector(`[data-nivel="${nivelActual}"]`).classList.add("activo");
    mostrarMensaje("ğŸ… Nuevo nivel: " + nivelActual);
  } else {
    ganarJuego();
  }
}

// Mensajes en pantalla
function mostrarMensaje(texto) {
  const msg = document.getElementById("mensajeFinal");
  msg.textContent = texto;
  setTimeout(() => msg.textContent = "", 3000);
}

// Fin del juego
function gameOver() {
  jugando = false;
  clearInterval(intervaloTiempo);
  mostrarMensaje("ğŸ’€ Fin del juego. Puntaje: " + puntos);
}

// Ganar el juego
function ganarJuego() {
  jugando = false;
  clearInterval(intervaloTiempo);
  mostrarMensaje("ğŸ† Â¡Completaste todas las especialidades con " + puntos + " puntos!");
  localStorage.setItem("medallaMedica", "true");
}
</script>
</body>
</html>

